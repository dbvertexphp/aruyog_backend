import{r as h,j as e,S as y,T as P,I as L,x as C,L as M,M as _,P as a,B as q,h as H,O as N,N as z,Q as F,W as Q}from"./index-daad4356.js";import{A as S}from"./admin-0dbd15a2.js";import{T as v,a as p,C as k,b as $,c as G,d as J,e as K,f as V,g as X}from"./TableSortLabel-c54745fa.js";import{C as Y}from"./Container-f3314c34.js";import{C as Z}from"./Card-3a4c491b.js";import"./Select-7e1876e1.js";function w({Userid:l,selected:o,name:d,description:j,createdAt:s,handleClick:x,handleDelete:u}){const[g,t]=h.useState(null),f=b=>{t(b.currentTarget)},m=()=>{t(null)};return e.jsxs(e.Fragment,{children:[e.jsxs(v,{hover:!0,tabIndex:-1,role:"checkbox",selected:o,children:[e.jsx(p,{padding:"checkbox",children:e.jsx(k,{disableRipple:!0,checked:o,onChange:x})}),e.jsx(p,{component:"th",scope:"row",padding:"none",children:e.jsx(y,{direction:"row",alignItems:"center",spacing:2,children:e.jsx(P,{variant:"subtitle2",noWrap:!0,children:d})})}),e.jsx(p,{children:j}),e.jsx(p,{children:s}),e.jsx(p,{children:e.jsx(L,{onClick:f,children:e.jsx(C,{icon:"eva:more-vertical-fill"})})})]}),e.jsx(M,{open:!!g,anchorEl:g,onClose:m,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{sx:{width:140}},children:e.jsxs(_,{sx:{color:"error.main"},onClick:()=>u(l),children:[e.jsx(C,{icon:"eva:trash-2-outline",sx:{mr:2}}),"Delete"]})})]})}w.propTypes={Userid:a.any,description:a.any,handleClick:a.func,createdAt:a.any,name:a.any,selected:a.any,handleDelete:a.func.isRequired};const ee={border:0,margin:-1,padding:0,width:"1px",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",clip:"rect(0 0 0 0)"};function T({order:l,orderBy:o,rowCount:d,headLabel:j,numSelected:s,onRequestSort:x,onSelectAllClick:u}){const g=t=>f=>{x(f,t)};return e.jsx($,{children:e.jsxs(v,{children:[e.jsx(p,{padding:"checkbox",children:e.jsx(k,{indeterminate:s>0&&s<d,checked:d>0&&s===d,onChange:u})}),j.map(t=>e.jsx(p,{align:t.align||"left",sortDirection:o===t.id?l:!1,sx:{width:t.width,minWidth:t.minWidth},children:e.jsxs(G,{hideSortIcon:!0,active:o===t.id,direction:o===t.id?l:"asc",onClick:g(t.id),children:[t.label,o===t.id?e.jsx(q,{sx:{...ee},children:l==="desc"?"sorted descending":"sorted ascending"}):null]})},t.id))]})})}T.propTypes={order:a.oneOf(["asc","desc"]),orderBy:a.string,rowCount:a.number,headLabel:a.array,numSelected:a.number,onRequestSort:a.func,onSelectAllClick:a.func};function ne(){const[l,o]=h.useState(0),[d,j]=h.useState("asc"),[s,x]=h.useState([]),[u,g]=h.useState("name"),[t,f]=h.useState(5),[m,b]=h.useState([]),A=async()=>{try{const n=await S.getAllCategory();b(n.data)}catch(n){console.error("Error fetching data:",n)}};h.useEffect(()=>{A()},[]);const I=(n,i)=>{i!==""&&(j(u===i&&d==="asc"?"desc":"asc"),g(i))},O=n=>{if(n.target.checked){const i=m.map(c=>c.name);x(i);return}x([])},R=(n,i)=>{const c=s.indexOf(i);let r=[];c===-1?r=r.concat(s,i):c===0?r=r.concat(s.slice(1)):c===s.length-1?r=r.concat(s.slice(0,-1)):c>0&&(r=r.concat(s.slice(0,c),s.slice(c+1))),x(r)},D=(n,i)=>{o(i)},U=n=>{o(0),f(parseInt(n.target.value,10))},W=async n=>{const c=F("Admin_data")._id,r=await S.deleteCategory(n,c);r.status&&(console.log(r),b(B=>B.filter(E=>E._id!==n)))};return e.jsxs(Y,{maxWidth:"xl",children:[e.jsxs(y,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:[e.jsx(P,{variant:"h4",children:"Category"}),e.jsx(H,{component:N,to:"/add-category",variant:"contained",color:"inherit",startIcon:e.jsx(C,{icon:"eva:plus-fill"}),children:"New Category"})]}),e.jsxs(Z,{children:[e.jsx(z,{children:e.jsx(J,{sx:{overflow:"unset"},children:e.jsxs(K,{sx:{minWidth:800},children:[e.jsx(T,{order:d,orderBy:u,rowCount:m.length,numSelected:s.length,onRequestSort:I,onSelectAllClick:O,headLabel:[{id:"name",label:"Name"},{id:"description",label:"Description"},{id:"createdAt",label:"Created"},{id:"status",label:"Status"},{id:""}]}),e.jsx(V,{children:m.slice(l*t,l*t+t).map(n=>e.jsx(w,{Userid:n._id,name:`${n.name}`,description:n.description,createdAt:n.createdAt,selected:s.indexOf(n.name)!==-1,handleClick:i=>R(i,n.name),handleDelete:W},n._id))})]})})}),e.jsx(X,{page:l,component:"div",count:m.length,rowsPerPage:t,onPageChange:D,rowsPerPageOptions:[5,10,25],onRowsPerPageChange:U})]})]})}function oe(){return e.jsxs(e.Fragment,{children:[e.jsx(Q,{children:e.jsx("title",{children:" Products | Minimal UI "})}),e.jsx(ne,{})]})}export{oe as default};
