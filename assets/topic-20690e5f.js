import{r as h,j as e,S as T,T as v,I as L,x as y,L as M,M as _,P as a,B as q,h as H,O as N,N as z,Q as F,W as Q}from"./index-daad4356.js";import{A as P}from"./admin-0dbd15a2.js";import{T as C,a as p,C as k,b as $,c as G,d as J,e as K,f as V,g as X}from"./TableSortLabel-c54745fa.js";import{C as Y}from"./Container-f3314c34.js";import{C as Z}from"./Card-3a4c491b.js";import"./Select-7e1876e1.js";function w({Userid:l,selected:o,name:d,description:j,categoryId:s,createdAt:x,handleClick:u,handleDelete:f}){const[t,g]=h.useState(null),m=S=>{g(S.currentTarget)},b=()=>{g(null)};return e.jsxs(e.Fragment,{children:[e.jsxs(C,{hover:!0,tabIndex:-1,role:"checkbox",selected:o,children:[e.jsx(p,{padding:"checkbox",children:e.jsx(k,{disableRipple:!0,checked:o,onChange:u})}),e.jsx(p,{component:"th",scope:"row",padding:"none",children:e.jsx(T,{direction:"row",alignItems:"center",spacing:2,children:e.jsx(v,{variant:"subtitle2",noWrap:!0,children:d})})}),e.jsx(p,{children:j}),e.jsx(p,{children:s}),e.jsx(p,{children:x}),e.jsx(p,{children:e.jsx(L,{onClick:m,children:e.jsx(y,{icon:"eva:more-vertical-fill"})})})]}),e.jsx(M,{open:!!t,anchorEl:t,onClose:b,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{sx:{width:140}},children:e.jsxs(_,{onClick:()=>f(l),children:[e.jsx(y,{icon:"eva:edit-fill",sx:{mr:2}}),"Edit"]})})]})}w.propTypes={Userid:a.any,description:a.any,categoryId:a.any,handleClick:a.func,createdAt:a.any,name:a.any,selected:a.any,handleDelete:a.func.isRequired};const ee={border:0,margin:-1,padding:0,width:"1px",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",clip:"rect(0 0 0 0)"};function I({order:l,orderBy:o,rowCount:d,headLabel:j,numSelected:s,onRequestSort:x,onSelectAllClick:u}){const f=t=>g=>{x(g,t)};return e.jsx($,{children:e.jsxs(C,{children:[e.jsx(p,{padding:"checkbox",children:e.jsx(k,{indeterminate:s>0&&s<d,checked:d>0&&s===d,onChange:u})}),j.map(t=>e.jsx(p,{align:t.align||"left",sortDirection:o===t.id?l:!1,sx:{width:t.width,minWidth:t.minWidth},children:e.jsxs(G,{hideSortIcon:!0,active:o===t.id,direction:o===t.id?l:"asc",onClick:f(t.id),children:[t.label,o===t.id?e.jsx(q,{sx:{...ee},children:l==="desc"?"sorted descending":"sorted ascending"}):null]})},t.id))]})})}I.propTypes={order:a.oneOf(["asc","desc"]),orderBy:a.string,rowCount:a.number,headLabel:a.array,numSelected:a.number,onRequestSort:a.func,onSelectAllClick:a.func};function ne(){const[l,o]=h.useState(0),[d,j]=h.useState("asc"),[s,x]=h.useState([]),[u,f]=h.useState("name"),[t,g]=h.useState(5),[m,b]=h.useState([]),S=async()=>{try{const n=await P.getAllTopics();b(n.data)}catch(n){console.error("Error fetching data:",n)}};h.useEffect(()=>{S()},[]);const A=(n,i)=>{i!==""&&(j(u===i&&d==="asc"?"desc":"asc"),f(i))},O=n=>{if(n.target.checked){const i=m.map(r=>r.name);x(i);return}x([])},R=(n,i)=>{const r=s.indexOf(i);let c=[];r===-1?c=c.concat(s,i):r===0?c=c.concat(s.slice(1)):r===s.length-1?c=c.concat(s.slice(0,-1)):r>0&&(c=c.concat(s.slice(0,r),s.slice(r+1))),x(c)},D=(n,i)=>{o(i)},U=n=>{o(0),g(parseInt(n.target.value,10))},E=async n=>{const r=F("Admin_data")._id,c=await P.deleteTopic(n,r);c.status&&(console.log(c),b(W=>W.filter(B=>B._id!==n)))};return e.jsxs(Y,{maxWidth:"xl",children:[e.jsxs(T,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:[e.jsx(v,{variant:"h4",children:"Topic"}),e.jsx(H,{component:N,to:"/add-topic",variant:"contained",color:"inherit",startIcon:e.jsx(y,{icon:"eva:plus-fill"}),children:"New Topic"})]}),e.jsxs(Z,{children:[e.jsx(z,{children:e.jsx(J,{sx:{overflow:"unset"},children:e.jsxs(K,{sx:{minWidth:800},children:[e.jsx(I,{order:d,orderBy:u,rowCount:m.length,numSelected:s.length,onRequestSort:A,onSelectAllClick:O,headLabel:[{id:"name",label:"Name"},{id:"description",label:"Description"},{id:"categoryId",label:"Category"},{id:"createdAt",label:"Created"},{id:"status",label:"Status"},{id:""}]}),e.jsx(V,{children:m.slice(l*t,l*t+t).map(n=>e.jsx(w,{Userid:n._id,name:`${n.name}`,description:n.description,categoryId:n.categoryId.name,createdAt:n.createdAt,selected:s.indexOf(n.name)!==-1,handleClick:i=>R(i,n.name),handleDelete:E},n._id))})]})})}),e.jsx(X,{page:l,component:"div",count:m.length,rowsPerPage:t,onPageChange:D,rowsPerPageOptions:[5,10,25],onRowsPerPageChange:U})]})]})}function oe(){return e.jsxs(e.Fragment,{children:[e.jsx(Q,{children:e.jsx("title",{children:" Products | Minimal UI "})}),e.jsx(ne,{})]})}export{oe as default};
