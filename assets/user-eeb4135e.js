import{r as x,j as e,S as C,A as E,T,I as M,x as P,L as W,M as B,P as t,B as L,N as q,W as H}from"./index-daad4356.js";import{A as k}from"./admin-0dbd15a2.js";import{T as U,a as h,C as w,b as _,c as $,d as z,e as F,f as G,g as J}from"./TableSortLabel-c54745fa.js";import{C as K}from"./Container-f3314c34.js";import{C as Q}from"./Card-3a4c491b.js";import"./Select-7e1876e1.js";function O({Userid:o,selected:l,firstName:d,avatarUrl:g,mobile:a,email:p,dob:u,state:b,handleClick:n,handleDelete:f}){const[m,j]=x.useState(null),S=y=>{j(y.currentTarget)},v=()=>{j(null)};return e.jsxs(e.Fragment,{children:[e.jsxs(U,{hover:!0,tabIndex:-1,role:"checkbox",selected:l,children:[e.jsx(h,{padding:"checkbox",children:e.jsx(w,{disableRipple:!0,checked:l,onChange:n})}),e.jsx(h,{component:"th",scope:"row",padding:"none",children:e.jsxs(C,{direction:"row",alignItems:"center",spacing:2,children:[e.jsx(E,{alt:d,src:g}),e.jsx(T,{variant:"subtitle2",noWrap:!0,children:d})]})}),e.jsx(h,{children:a}),e.jsx(h,{children:p}),e.jsx(h,{children:u}),e.jsx(h,{children:b}),e.jsx(h,{children:e.jsx(M,{onClick:S,children:e.jsx(P,{icon:"eva:more-vertical-fill"})})})]}),e.jsx(W,{open:!!m,anchorEl:m,onClose:v,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{sx:{width:140}},children:e.jsxs(B,{sx:{color:"error.main"},onClick:()=>f(o),children:[e.jsx(P,{icon:"eva:trash-2-outline",sx:{mr:2}}),"Delete"]})})]})}O.propTypes={Userid:t.any,avatarUrl:t.any,mobile:t.any,handleClick:t.func,state:t.any,firstName:t.any,dob:t.any,email:t.any,selected:t.any,handleDelete:t.func.isRequired};const V={border:0,margin:-1,padding:0,width:"1px",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",clip:"rect(0 0 0 0)"};function A({order:o,orderBy:l,rowCount:d,headLabel:g,numSelected:a,onRequestSort:p,onSelectAllClick:u}){const b=n=>f=>{p(f,n)};return e.jsx(_,{children:e.jsxs(U,{children:[e.jsx(h,{padding:"checkbox",children:e.jsx(w,{indeterminate:a>0&&a<d,checked:d>0&&a===d,onChange:u})}),g.map(n=>e.jsx(h,{align:n.align||"left",sortDirection:l===n.id?o:!1,sx:{width:n.width,minWidth:n.minWidth},children:e.jsxs($,{hideSortIcon:!0,active:l===n.id,direction:l===n.id?o:"asc",onClick:b(n.id),children:[n.label,l===n.id?e.jsx(L,{sx:{...V},children:o==="desc"?"sorted descending":"sorted ascending"}):null]})},n.id))]})})}A.propTypes={order:t.oneOf(["asc","desc"]),orderBy:t.string,rowCount:t.number,headLabel:t.array,numSelected:t.number,onRequestSort:t.func,onSelectAllClick:t.func};function X(){const[o,l]=x.useState(0),[d,g]=x.useState("asc"),[a,p]=x.useState([]),[u,b]=x.useState("firstName"),[n,f]=x.useState(5),[m,j]=x.useState([]),S=async()=>{try{const s=await k.allUsersDetails();j(s.data)}catch(s){console.error("Error fetching data:",s)}};x.useEffect(()=>{S()},[]);const v=(s,i)=>{i!==""&&(g(u===i&&d==="asc"?"desc":"asc"),b(i))},y=s=>{if(s.target.checked){const i=m.map(r=>r.firstName);p(i);return}p([])},D=(s,i)=>{const r=a.indexOf(i);let c=[];r===-1?c=c.concat(a,i):r===0?c=c.concat(a.slice(1)):r===a.length-1?c=c.concat(a.slice(0,-1)):r>0&&(c=c.concat(a.slice(0,r),a.slice(r+1))),p(c)},I=(s,i)=>{l(i)},N=s=>{l(0),f(parseInt(s.target.value,10))},R=async s=>{(await k.AdmindeleteUser(s)).success&&j(r=>r.filter(c=>c._id!==s))};return e.jsxs(K,{maxWidth:"xl",children:[e.jsx(C,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:e.jsx(T,{variant:"h4",children:"Users"})}),e.jsxs(Q,{children:[e.jsx(q,{children:e.jsx(z,{sx:{overflow:"unset"},children:e.jsxs(F,{sx:{minWidth:800},children:[e.jsx(A,{order:d,orderBy:u,rowCount:m.length,numSelected:a.length,onRequestSort:v,onSelectAllClick:y,headLabel:[{id:"firstName",label:"Name"},{id:"mobile",label:"Mobile"},{id:"email",label:"Email"},{id:"dob",label:"DOB"},{id:"state",label:"State"},{id:"status",label:"Status"},{id:""}]}),e.jsx(G,{children:m.slice(o*n,o*n+n).map(s=>e.jsx(O,{Userid:s._id,firstName:`${s.firstName} ${s.lastName}`,mobile:s.mobileNumber,email:s.email,dob:s.dob,state:s.state,avatarUrl:s.avatarUrl,selected:a.indexOf(s.firstName)!==-1,handleClick:i=>D(i,s.firstName),handleDelete:R},s._id))})]})})}),e.jsx(J,{page:o,component:"div",count:m.length,rowsPerPage:n,onPageChange:I,rowsPerPageOptions:[5,10,25],onRowsPerPageChange:N})]})]})}function ae(){return e.jsxs(e.Fragment,{children:[e.jsx(H,{children:e.jsx("title",{children:" User | Minimal UI "})}),e.jsx(X,{})]})}export{ae as default};
